---
title: "从头再来之单变量微积分"
date: 2021-07-11T15:01:38+08:00
draft: false
categories:
    - work
    - mathematics
    - calculus
    - machine learning
tags:
    - math
    - calculus
    - 从头再来
libraries:
    - katex

enableTocContent: true
---

## 前沿

MIT 18.01，该学的总得学

## 1. 导数 (derivative)

### 几何解释

![图片1.png](https://i.loli.net/2021/07/11/p4kCTMmu6IYP7QN.png)

求图像 $y=f(x)$ 在某点 $P=(x_{0},y_{0})$ 处的切线：$y-y_{0}=m(x-x_{0})$。因此我们需要一下几个条件：

1. 这个切线经过点$p=(x_{0},y_{0})$，所以有： $y_{o}=f(x_{0})$

2. 这个切线的斜率：$m$，即 $f$ 的导数 $f'(x)$

所以这里就可以给出导数的定义：

**导数(derivative)**：它是$f$在$x_{0}$处的导数，也是$y=f(x)$在此点的斜率

-------------------------------------------

![图片2.png](https://i.loli.net/2021/07/11/VQ4MUb2Wo3DLaHt.png)

也可以这样理解，另取一个点$Q$与$P$构成一条割线，当$Q$逐渐逼近$P$时，割线就会逐渐逼近切线，即：

**切线其实是一种极限**，是$Q$趋近于$P$时，割线$PQ$的极限（可以把$P$当做不变，而$Q$变化）

- 水平方向上的位置差$\Delta x$，即$x$的变化量
- 斜率所对应增长的高即$\Delta f$

所以，割线的斜率表示为:$\frac{\Delta f}{\Delta x}$

而割线逼近切斜的过程可以用$\Delta x \rightarrow 0$，即$\Delta x$趋近于0的极限来表示

所以切线的斜率是：

$$m=\lim_{\Delta x \rightarrow 0}{\frac{\Delta f}{\Delta x}}$$

所以，**导数的含义还可以理解为**：

导数等于当$\Delta x$趋近于0时，$f$的变化量，即

$$f'(x_{0}) = \lim_{\Delta x_{0}\rightarrow 0}{\frac{f(x_{0}+\Delta x)-f(x_{0})}{\Delta x}}$$

-------------------------------------------

举几个例子：

- $f(x) = \frac{1}{x}$

$$\frac{\Delta f}{\Delta x}=\frac{\frac{1}{x_{0}+\Delta x}-\frac{1}{x_{0}}}{\Delta x}=\frac{1}{\Delta x}\left[\frac{x_{0}-\left(x_{0}+\Delta x\right)}{\left(x_{0}+\Delta x\right) x_{0}}\right]=\frac{1}{\Delta x}\left[\frac{-\Delta x}{\left(x_{0}+\Delta x\right) x_{0}}\right]=\frac{-1}{\left(x_{0}+\Delta x\right) x_{0}}$$

> 这个表达$\frac{\Delta f}{\Delta x}$有一个学名，叫做**差商(difference quotient)**

现在取$\Delta x\rightarrow 0$，得到最终的导数：

$$\lim_{\Delta x \rightarrow 0} \frac{-1}{\left(x_{0}+\Delta x\right) x_{0}}=-\frac{1}{x_{0}^{2}}$$

![图片3.png](https://i.loli.net/2021/07/11/hBfjuMaAvqX9YiS.png)

> 可以简单检验一下结果的正确：1.切线的斜率永远都是负的，即导数永远都是负的 2.当$\Delta x \rightarrow \infty$，$f^{\prime}\left(x_{0}\right)$的绝对值越来越小，对应图像上的切线越来越平缓

**另一个例子：**（导数的实际应用）

求由$y=1/x$切线和坐标轴围合而成的三角形区域面积，即上图中的阴影部分面积

通过$P=(x_{0},y_{0})$点的切线方程：

$$y-y_{0}=f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)=\frac{-1}{x_{0}^{2}}\left(x-x_{0}\right)$$

- 计算$x$轴截距，当$y=0$时，$x=2x_{0}$
- 计算$y$轴截距，因为$y=1/x$是对称的，所以$y=2y_{0}$

最后可得三角形面积：$\left(2 x_{0}\right)\left(2 y_{0}\right) / 2=\left(2 x_{0}\right)\left(2 / x_{0}\right) / 2=2$

**再举一个例子**

$f(x)=x^{n}$，$n=1,2,\cdots$，求$f'$


$$\frac{\Delta f}{\Delta x}=\frac{(x+\Delta x)^{n}-x^{n}}{\Delta x}$$

二项式定理：

$$(x+\Delta x)^{n}=(x+\Delta x)(x+\Delta x) \cdots(x+\Delta x)=x^{n}+n x^{n-1} \Delta x+O\left((\Delta x)^{2}\right)$$

> 其中，$O\left((\Delta x)^{2}\right)$表示这些项中$\Delta x$具有更高阶，在求$x^{n}$导数的这个问题中可以忽略不计

所以，可以得到：

$$ \begin{aligned} \frac{\Delta f}{\Delta x} &=\frac{1}{\Delta x}\left((x+\Delta x)^{n}-x^{n}\right) \\\\\\\\ &=\frac{1}{\Delta x}\left(x^{n}+n x^{n-1} \Delta x+O\left((\Delta x)^{2}\right)-x^{n}\right) \\\\\\\\ &=n x^{n-1}+O(\Delta x) \end{aligned} $$

当$\Delta x\rightarrow 0$时，可以得到：

$$\frac{d}{d x} x^{n}=n x^{n-1}$$

### 导数的表示法

- 牛顿：$f'$
- 莱布尼茨：$\frac{d f}{d x}=\frac{d y}{d x}=\frac{d}{d x} f=\frac{d}{d x} y$

$$f' = \frac{d f}{d x}=\frac{d y}{d x}=\frac{d}{d x} f=\frac{d}{d x} y$$

> 经常的情况，混在一块用也是可以的

### 物理解释

> 导数即“变化率”

![图片4.png](https://i.loli.net/2021/07/12/5zDsPdR4IkbXKvy.png)

当作图$y=f(x)$时，我们可以记录$x$和$y$的变化，就相当于记录了相对变换率：$\frac{\Delta y}{\Delta x}$

从变化率的角度，这是一种平均变化率（通常可以把$x$想象成时间）

$\Delta x \rightarrow 0$则有：$\frac{\Delta y}{\Delta x} \rightarrow \frac{d y}{d x}$，变成了瞬时变化率

**举几个例子：**

1. $q$表示电荷，$\frac{d q}{d t}$表示电流
2. $s$表示距离，$\frac{d s}{d t}$表示速度
3. $T$表示温度，$\frac{d T}{d t}$表示温度梯度


## 2. 极限和连续 (limits and continuity)

### 极限

举一些简单极限的例子：$\lim _{x \rightarrow 4} \frac{x+3}{x^{2}+1}=\frac{4+3}{4^{2}+1}=\frac{7}{17}$

但是导数的情况永远不会那么简单：$\lim_{x \rightarrow x_{0}} \frac{f(x)-f\left(x_{0}\right)}{x-x_{0}}$，结果永远是$0/0$，所以需要先对他进行一些消运算

- **右极限**：$\lim_{x \rightarrow x_{0}^{+}} f(x)$，表示取的是函数的右极限。即$x$从$x_{0}$的右侧接近$x_{0}$
    $x\rightarrow x_{0}$
    $x>x_{0}$

- **左极限**：$\lim_{x \rightarrow x_{0}^{-}} f(x)$，表示取的是函数的左极限。即$x$从$x_{0}$的左侧接近$x_{0}$
    $x\rightarrow x_{0}$
    $x<x_{0}$

</br>

举个例子：$f(x)=\left\\{\begin{array}{c}x+1, x \geq 0 \\\\ -x+2, x<0\end{array}\right.$

![图片5.png](https://i.loli.net/2021/07/12/NzAHBSneavrsOt3.png)
> 图源知乎@三少爷的键

右极限： $\lim_{x \rightarrow 0^{+}} f(x)=\lim _{x \rightarrow 0} x+1=1$

左极限： $\lim_{x \rightarrow 0^{-}} f(x)=\lim _{x \rightarrow 0}-x+2=2$

> 求极限的时候不需要知道$x=0$的函数值，比如这里根本就没定义过$f(0)$

### 连续

**定义**：$x\rightarrow x_{0}$时，$f(x)$的极限等于$f(x_{0})$，则称：$f$在$x_{0}$点的连续。即：

1. 要求$\lim_{x \rightarrow x_{0}} f(x)$这一极限必须存在，**左极限=右极限**
2. $f(x_{0})$必须有定义
3. 函数值和极限相等：$\lim_{x \rightarrow x_{0}} f(x)=f\left(x_{0}\right)$

------------------------

讨论几种不连续的情况：

1. 跳跃间断：左右极限均存在，但是不相等。即上面的这个例子就是跳跃间断

2. 可去间断：左右极限存在并相等，但不等于函数值。

    ![图片6.png](https://i.loli.net/2021/07/13/AwDmlRu9Qzcxfq2.png)
    > 图源知乎@三少爷的键

    例：$g(x)=\frac{\sin x}{x}$ 和 $h(x)=\frac{1-\cos x}{x}$ 他们在零点无定义，但是他们可以在零点去极限，所以他们在$x=0$可去间断

3. 无穷间断：左右极限是无穷
    
    例：$y=1/x$

    $\lim_{x\rightarrow x^{+}}\frac{1}{x} = \infty$

    $\lim_{x\rightarrow x^{-}}\frac{1}{x} = -\infty$

    ![图片7.png](https://i.loli.net/2021/07/13/kXu1n3jzaEYtb8V.png)

    他的导数也是无穷间断，但是是左右极限一致都是负无穷：$y' = \frac{-1}{x^{2}}$

4. 另类（丑陋）间断：例如 $y=\sin{\frac{1}{x}}$，当$x\rightarrow 0$时，将无限震荡，没有左右极限

    ![图片8.png](https://i.loli.net/2021/07/13/iNSLzjnX2GbstZF.png)

------------------------

**定理：可导必连续**，若函数$f(x)$在$x_{0}$点可导，则函数$f(x)$在$x_{0}$连续，即：

$$\lim_{x \rightarrow x_{0}} f(x)-f\left(x_{0}\right)=0$$

证明：

$$\lim_{x \rightarrow x_{0}} f(x)-f\left(x_{0}\right)=\lim_{x \rightarrow x_{0}} \frac{f(x)-f\left(x_{0}\right)}{x-x_{0}}\left(x-x_{0}\right)=f^{\prime}\left(x_{0}\right) \cdot 0=0$$

## 3. 求导公式及三角函数导数

求导公式分为两种：1) 针对特殊函数进行求导； 2) 另一种是通用的求导法则

### 特定的求导法则

1. $x$ 的 $n$ 次方：$f(x) = x^{n}$
   
    $f'(x) = nx^{n-1}$

</br>

2. $x$ 的倒数： $f(x) = \frac{1}{x}$

    $f'(x) = -\frac{1}{x^{2}}$


</br>

3. 正弦函数：$f(x) = \sin{x}$

    $f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \sin x=\cos x$

    > 简要推导一下：
    >
    > $$ \begin{aligned} \frac{\sin (x+\Delta x)-\sin x}{\Delta x} &=\frac{\sin x \cos \Delta x+\cos x \sin \Delta x-\sin x}{\Delta x} \\\\ &=\sin x\left(\frac{\cos \Delta x-1}{\Delta x}\right)+\cos x\left(\frac{\sin \Delta x}{\Delta x}\right) \end{aligned} $$
    > > 正弦两角和公式：$\sin{(a+b)} = \sin{a}\cos{b} + \cos{a}\sin{b}$
    > > 余弦两角和公式：$\cos{(a+b)} = \cos{a}\cos{b} - \sin{a}\sin{b}$
    > >     
    > > 在进行求解的时候，要尽量把$1/0$化成$0/0$的形式，这样才方便求极限，因此把$\sin x \cos \Delta x$和$\sin x$合并同类项
    > 
    > $\Delta x \rightarrow 0$时，$(\cos \Delta x-1) / \Delta x \rightarrow 0$
    > $\Delta x \rightarrow 0$时，$\sin \Delta x / \Delta x \rightarrow 1$
    > 
    > $$\therefore f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \sin x=\cos x$$

    > 这里还需要证明一下上面的两个极限：
    > 
    > $$ \begin{aligned} \lim _{\theta \rightarrow 0} \frac{1-\cos \theta}{\theta} &=\lim _{\theta \rightarrow 0}\left(\frac{1-\cos \theta}{\theta} \cdot \frac{1+\cos \theta}{1+\cos \theta}\right) \\\\ &=\lim _{\theta \rightarrow 0} \frac{1-\cos ^{2} \theta}{\theta(1+\cos \theta)} \\\\ &=\lim _{\theta \rightarrow 0} \frac{\sin ^{2} \theta}{\theta(1+\cos \theta)} \\\\ &=\lim _{\theta \rightarrow 0}\left(\frac{\sin \theta}{\theta} \cdot \frac{\sin \theta}{1+\cos \theta}\right) \\\\ &=\left(\lim _{\theta \rightarrow 0} \frac{\sin \theta}{\theta}\right) \cdot\left(\lim _{\theta \rightarrow 0} \frac{\sin \theta}{1+\cos \theta}\right) \\\\ &=1 \cdot \frac{0}{1+1}=0 \end{aligned} $$
    > 
    > $$\lim_{\theta \rightarrow 0} \frac{\sin \theta}{\theta}=1$$
    > 这个证明网上有详细的几何法证明：[正弦函数求导公式基本推导](https://www.cnblogs.com/haogev6/p/8557082.html)，视频中给出的感觉不太严谨

4. 余弦函数：$f(x) = \sin{x}$

    $f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \cos x=-\sin x$

    > 同上。进行简要推导：
    > 
    > $$ \begin{aligned} \frac{\cos (x+\Delta x)-\cos x}{\Delta x} &=\frac{\cos x \cos \Delta x-\sin x \sin \Delta x-\cos x}{\Delta x} \\\\ &=\cos x\left(\frac{\cos \Delta x-1}{\Delta x}\right)-\sin x\left(\frac{\sin \Delta x}{\Delta x}\right) \end{aligned} $$
    >
    > $$\therefore f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \cos x=-\sin x$$

### 通用求导法则

1. 导数的加法法则

    $$(u+v)' = u' + v'$$

    或者可以写成：

    $$\frac{\mathrm{d}}{\mathrm{d} x}(u(x)+v(x))=\frac{\mathrm{d}}{\mathrm{d} x} u(x)+\frac{\mathrm{d}}{\mathrm{d} x} v(x)$$

2. 导数的数乘法则

    $$(Cu)' = Cu'$$

    其中，$C$为常数。或写作：

    $$\frac{\mathrm{d}}{\mathrm{d} x} c u(x)=c \frac{\mathrm{d}}{\mathrm{d} x} u(x)$$

3. 导数的乘法法则

    $$(uv)' = u'v + uv'$$

    或者可以写成：

    $$\frac{\mathrm{d}u(x)v(x)}{\mathrm{d} x} =  u(x)\frac{\mathrm{d}v(x)}{\mathrm{d} x}+v(x)\frac{\mathrm{d}u(x)}{\mathrm{d} x}$$

    > 即求导每次只改变一个函数，除法同理

    > 简单证明一下：
    > $$ \begin{aligned} &\Delta(u v)=u(x+\Delta x) v(x+\Delta x)-u(x) v(x) \\\\ &=(u(x+\Delta x)-u(x)) v(x+\Delta x)+u(x)(v(x+\Delta x)-v(x)) \end{aligned} $$
    > 两边取极限，得到：
    > $$\frac{d}{d x}(u v)=\frac{d u}{d x} v+\frac{d v}{d x} u$$

    > 课程中将导数的除法法则单独列出来了，但是我还是习惯将除法化成乘法$X^{-1}$的形式

## 4. 链式法则及高阶导数

### 链式法则

链式法则：一条合乘规则，重点在于代换，即复合函数的微分是两个导数的乘积

$$\frac{\Delta y}{\Delta t}=\frac{\Delta y}{\Delta x} \frac{\Delta x}{\Delta t}$$

举个例子：

$$y=(\sin t)^{10}=\sin ^{10}(t)$$

这种类型的函数，即多个简单函数嵌套在一起，求导方法在于换元，令$x=\sin t$，则有$y=x^{10}$，所以最后得到：

$$\frac{d}{d t}(\sin t)^{10}=10 x^{9} \cos t=10(\sin t)^{9} \cos t$$

再一个例子：

$$\frac{d}{d t} \sin (10 t)$$

$x=10 t$为内函数，$y=\sin x$为外函数

$$\frac{d}{d t} \sin (10 t)=\cos x \cdot 10=10 \cos (10 t)$$

### 高阶导数

高阶导数：指不断的进行求导，要想得到三阶导数，就需要从一阶导数求二阶，从二阶求三阶

$$u=u(x), \quad u^{\prime}, \quad u^{\prime \prime}=\left(u^{\prime}\right)^{\prime}, \quad u^{\prime \prime \prime}=\left(u^{\prime \prime}\right)^{\prime}, \quad u^{(4)}=u^{\prime \prime \prime \prime}=\left(u^{\prime \prime \prime}\right)^{\prime}$$

举个例子：

$$u=\sin x, \quad u^{\prime}=\cos x, \quad u^{\prime \prime}=-\sin x, \quad u^{\prime \prime \prime}=-\cos x, \quad u^{(4)}=\sin x$$

------------------------------------------------

**莱布尼兹表示法**：$u^{\prime}=\frac{d u}{d x}=\frac{d}{d x} u=D u$

可以将$D=\frac{d}{d x}$视为一个运算符，将一个函数转换成另一个函数。比如；输入$\sin$得到他的导数是$\cos$，输入$x^{2}$得到他的导数是$2x$

在这种表示法下，高阶导数可以表示为；

$$u^{\prime \prime}=\frac{d}{d x} \frac{d u}{d x}=\frac{d}{d x} \frac{d}{d x} u=\left(\frac{d}{d x}\right)^{2} u=\frac{d^{2}}{d x^{2}} u=\frac{d^{2} u}{d x^{2}}=D^{2} u$$

表示二阶的导数，注意，这里$\frac{d^{2} u}{d x^{2}}$的分母下的表示法$\mathrm{d} x^{2}$的实际含义是$(\mathrm{d}x)^{2}$

$$u^{\prime \prime \prime}=\frac{d^{3} u}{d x^{3}}=D^{3} u$$

表示三阶代数

举个例子：求$D^{n} x^{n}$

$$ \begin{aligned} D x^{n}&=n x^{n-1} \\\\ D^{2} x^{n}&=n(n-1) x^{n-2} \\\\ D^{3} x^{n}&=n(n-1)(n-2) x^{n-3}\\\\ &\vdots \\\\ D^{n} x^{n}&=n(n-1)(n-2) \ldots 2 \cdot 1=n ! \end{aligned} $$

## 5. 隐函数和逆函数求导

### 隐函数求导

隐函数：两个变量的关系不是显式($y=2x$)，而是隐式的，如：$x^{2}+y^{2}=1$

举个例子，将上面幂的导数扩展为有理数的情况，即：

$$\frac{d}{d x} x^{a}=a x^{a-1}, \quad a=\frac{m}{n}, \quad \text{m,n均为整数，求}\frac{\mathrm{d}y}{\mathrm{d}x}$$

转换一下可得：

$$y^{n}=x^{m}$$

对等式两侧求微分：

$$\frac{d}{d x} y^{n}=\frac{d}{d x} x^{m}$$

> 注意，这里的两边同样都是对$x$求微分

$$ \begin{aligned} &\Rightarrow \frac{d}{d y} y^{n} \frac{d y}{d x}=m x^{m-1} \\\\\\\\ &\Rightarrow n y^{n-1} \frac{d y}{d x}=m x^{m-1} \\\\\\\\ &\Rightarrow \frac{d y}{d x}=\frac{m x^{m-1}}{n y^{n-1}}=\frac{m}{n} \frac{x^{m-1}}{\left(x^{m / n}\right)^{n-1}}=\frac{m}{n} x^{\frac{m}{n}-1}=a x^{a-1} \end{aligned} $$

</br>

再举一个例子：

$$x^{2}+y^{2}=1$$

下面分别用显式的形式与隐式的形式对上式进行求导

显式：

$$y=\left(1-x^{2}\right)^{1 / 2}$$

$$y^{\prime}=\frac{1}{2}\left(1-x^{2}\right)^{-\frac{1}{2}}(-2 x)=\frac{-x}{\sqrt{1-x^{2}}}$$

隐式：等式两边对$x$进行求导：

$$2 x+2 y y^{\prime}=0$$

$$y^{\prime}=-x / y = \frac{-x}{\sqrt{1-x^{2}}}$$

再来一个例子：

$$y^{4}+x y^{2}-2=0$$

等式两边对$x$求导：

$$4 y^{3} y^{\prime}+y^{2}+2 x y y^{\prime}-0=0 \Rightarrow y^{\prime}=\frac{-y^{2}}{4 y^{3}+2 x y}$$

注意，$y^{4}$对$x$求导中其实用到的是链式法则，先$\frac{\mathrm{d}y^{4}}{\mathrm{d}y}\frac{\mathrm{d}y}{\mathrm{x}}$，所以在后面有一个$y'$要跟，这个要记住

### 反函数（逆函数求导）

> 隐函数求导法的一个应用就是求反函数的导数值。只要知道原函数的导数，反函数的导数一定是知道的

举个例子：

$$y=\sqrt{x}, \quad x>0$$

其中，$y$是$x$的原函数：$y=f(x)$，则其反函数$x = g(y) = y^{2}$，也将反函数记为$g=f^{-1}$

![图片9.png](https://i.loli.net/2021/07/14/8FNYc1mnw7dSfGW.png)

从图上看，原函数和反函数是关于$x-y$对称的

举个例子：

$$y=\tan ^{-1} x=\arctan x$$

即

$$\tan (y)=x$$

等式两边对$x$取导数

$$\frac{1}{\cos ^{2} y} y^{\prime}=1$$

$$y^{\prime}=\cos ^{2} y$$

在图像上可以得到：

$$\cos y=\frac{1}{\sqrt{1+x^{2}}}$$

所以可得最终的结果

$$\frac{d}{d x} \tan ^{-1} x=\frac{1}{1+x^{2}}$$

## 6. 指数和对数

### 指数

指数函数：$a^{x}$，表示以$a$为基底的指数函数，遵循如下运算：

$$ \begin{aligned} &a^{x_{1}+x_{2}}&=a^{x_{1}} a^{x_{2}} \\\\ &\left(a^{x_{1}}\right)^{x_{2}}&=a^{x_{1} x_{2}} \end{aligned} $$

其中，指数可以是任意的实数，即：

$a^{m/n} = \sqrt[n]{a^{m}}$

而他的导数是：

$$\frac{\mathrm{d}}{\mathrm{d}x}a^{x} = a^{x}\ln{a}$$

------------------------

推导一下是如何得到：

$$a^{x} = (e^{\ln{a}x})$$

所以：

$$\frac{\mathrm{d}}{\mathrm{d}x}a^{x} = \frac{\mathrm{d}}{\mathrm{d}x}e^{x\ln{a}}= \ln{a}·e^{x\ln{a}} = a^{x}·\ln{a}$$

还有另一种方法：**对数微分法**

求原本的函数转换成求函数的对数的导数，即$y=e^{x}$，求$z = \ln{y} = x$的导数$\frac{\mathrm{d}z}{\mathrm{d}x}$，再通过隐函数求导还原回来

$$\frac{\mathrm{d}}{\mathrm{d}x}\ln{u} = (\frac{\mathrm{d}}{\mathrm{d}x}\ln{u})\frac{\mathrm{d}u}{\mathrm{d}x}=\frac{1}{u}\frac{\mathrm{d}u}{\mathrm{d}x}$$

当$u=a^{x}$时：

$$\frac{1}{u}\frac{\mathrm{d}}{\mathrm{d}x}u = \frac{\mathrm{d}}{\mathrm{d}x}\ln{u} = \ln{a}$$

所以最终得到：

$$\frac{\mathrm{d}u}{\mathrm{d}x} = a^{x}\ln{a}$$

------------------------

例题1： $v = x^{x}$

两边取对数得：

$$\ln{v} = x\ln{x}$$

两边对$x$取导数：

$$\frac{1}{v}\frac{\mathrm{d}v}{\mathrm{d}x} = \ln{x} + x·\frac{1}{x}$$

所以：

$$\frac{\mathrm{d}v}{\mathrm{d}x} = v(\ln{x}+1) = x^{x}(\ln{x}+1)$$

### 自然常数e

下面推导一下指数函数的导数$\frac{\mathrm{d}}{\mathrm{d}x}a^{x}$

从定义出发：

$$ \lim_{\Delta x\rightarrow 0}{\frac{a^{x+\Delta x} - a^{x}}{\Delta x}} =\lim_{\Delta x\rightarrow 0}{a^{x}\frac{a^{\Delta x} - 1}{\Delta x}} =a^{x}\lim_{\Delta x\rightarrow 0}{\frac{a^{\Delta x} - 1}{\Delta x}} $$

即：

$$\frac{\mathrm{d}}{\mathrm{d}x}a^{x} = a^{x}\lim_{\Delta x\rightarrow 0}\frac{a^{\Delta x}-1}{\Delta x}$$

令：

$$M(a) = \lim_{\Delta x\rightarrow 0}\frac{a^{\Delta x}-1}{\Delta x}$$

则：

$$\frac{\mathrm{d}}{\mathrm{d}x}a = M(a)a^{x}$$

所以现在要求就转变成了$M(a)$

代入$0$可知：

$$\frac{\mathrm{d}}{\mathrm{d}x}a^{x}\bigg|_{x=0} = M(a)a^{0} = M(a)$$

所以，$M(a)$等于指数函数在$x=0$处的斜率

> 所以和之前的现象其实类似，只要知道一个地方的导数，就能进而知道其他地方的导数

所以，我们**定义常数e(自然常数)**，使之满足$M(e) = 1$，即$\frac{\mathrm{d}}{\mathrm{d}x}e^{x}\bigg|_{x=0}=1$

结合之前的$\frac{\mathrm{d}}{\mathrm{d}x}a = M(a)a^{x}$可得：

$$\frac{\mathrm{d}}{\mathrm{d}x}e = M(e)e^{x} = e^{x}$$

> 非常重要的一个式子

----------------------------------------

例：求$\lim_{n\rightarrow \infty}{(1+\frac{1}{n})^{n}}$

两边取对数可得：

$$\ln{((1+\frac{1}{n})^{n})} = n\ln{(1+\frac{1}{n})}$$

记$\Delta x = \frac{1}{n} \rightarrow 0$，所以上式转变为：

$$n\ln{(1+\frac{1}{n})} = \frac{1}{\Delta x}\ln{(1+\Delta x)} = \frac{1}{\Delta x}(\ln{(1+\Delta x)-\ln{(1)}})$$

而这个式子取极限正好是$\ln{x}$在$x=1$处的导数，即$\frac{\mathrm{d}}{\mathrm{d}x}\ln{x}\bigg|_{x=0} = 1$

所以：

$$\lim_{n\rightarrow \infty}{\ln{((1+\frac{1}{n})^{n})}} = 1$$

$$\lim_{n\rightarrow \infty}{(1+\frac{1}{n})^{n}} = e$$

### 对数

引入自然对数$w=\ln{x}$，其定义为：$y=e^{x}\Rightarrow \ln{y} = x$，遵循以下运算法则：

$$\ln{(x_{1}x_{2})} = \ln{x_{1}}+\ln{x_{2}}$$

其中，$\ln{1}=0,\qquad \ln{e}=1$

对数函数的导数是：

$$\frac{\mathrm{d}}{\mathrm{d}x}\ln{x} = \frac{1}{x}$$

---------------------------------------

而对数函数$\frac{\mathrm{d}}{\mathrm{d}x}\ln{x}$的导数需要用到隐函数微分法：

$$w=\ln{x}$$

则有：

$$e^{w} = x$$

对两侧求导：

$$e^{w}\frac{\mathrm{d}w}{\mathrm{d}x} = 1$$

所以得到结果：

$$\frac{\mathrm{d}w}{\mathrm{d}x} = \frac{1}{e^{w}} = \frac{1}{x}$$

## 8. 线性近似

> 接下来的一个章节开始讲导数的应用

线性近似使用一个公式可以概括；

$$f(x) \approx f\left(x_{0}\right)+f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)$$

他的几何含义是：假设有一个曲线$f(x)$，那么该曲线在切点上近似于其切线。

公式的右边就是其切线的表达

举个例子：

$$f(x) = \ln{x}, \quad \text{导数是}\quad f'(x) = \frac{1}{x}$$

在$x_{0}=1$处：$f(1)=0$，$f'(1) = 1$，所以：

$$f(x)\approx f(1) +f'(1)(x-1) = x-1$$

所以在 $x_{0}=1$处，$f(x)$ 近似于切线，即 $\ln{x} \approx x-1$，作图如下：

![图片10.png](https://i.loli.net/2021/07/15/ycbVk1hdfI5On2K.png)

---------------------------

下面从导数的定义来解释这个线性近似：

导数的定义是：

$$f^{\prime}\left(x_{0}\right)=\lim _{x \rightarrow x_{0}} \frac{\Delta f(x)}{\Delta x}$$

逆向看待就是：

$$\lim_{x \rightarrow x_{0}} \frac{\Delta f(x)}{\Delta x} = f^{\prime}\left(x_{0}\right)$$

当$\Delta x\rightarrow 0$时，$\frac{\Delta f(x)}{\Delta x} \approx f^{\prime}\left(x_{0}\right)$

所以有：

$$\Delta f(x) \approx f^{\prime}\left(x_{0}\right) \Delta x$$

$$f(x)-f\left(x_{0}\right) \approx f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)$$

$$f(x) \approx f\left(x_{0}\right)+f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)$$

---------------------------

若近似公式以$x_{0}=0$为基点，公式变得更为简单：$f(x)\approx f(0)+f'(0)x$

所以下面讨论一下不同公式在$x_{0}=0$出的近似

|approx|$f'$|$f(0)$|$f'(0)$|
|:--:|:--:|:--:|:--:|
|$\sin{x}\approx x$|$\cos{x}$|$0$|$1$|
|$\cos{x}\approx x$|$-\sin{x}$|$1$|$0$|
|$e^{x}=1+x$|$e^{x}$|$1$|$1$|
|$\ln{(1+x)}\approx x$|$1/(1+x)$|$0$|$1$|
|$(1+x)^{r}$|$r(1+x)^{r-1}$|$1$|$r$|

举几个类似的例子：

1. 求$\ln{1.1}$的时候，就可以应用$\ln{1.1} = \ln{(1+0.1)} = 0.1$

2. 求$\frac{e^{-3 x}}{\sqrt{1+x}}$在$x_{0}=0$处的近似

    $$\frac{e^{-3 x}}{\sqrt{1+x}}=e^{-3 x}(1+x)^{-1 / 2} \approx(1-3 x)\left(1-\frac{1}{2} x\right)=1-\frac{7}{2} x+\frac{3}{2} x^{2} \approx 1-\frac{7}{2} x$$

    因为在之前近似切线的时候，已经把很多的二次项全部忽略掉了，所以这里也对二次项急性忽略，就丢掉了

### 9. 曲线构图

### 二次近似

> 和上面的线性近似相同，这里换成使用一个二次函数来近似一点上的函数$f(x)$
>
> 只有在线性近似精度不够的时候才用二阶近似

$$f(x)=f\left(x_{0}\right)+f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)+\frac{f^{\prime \prime}\left(x_{0}\right)}{2}\left(x-x_{0}\right)^{2}$$

所以上面几个经典公式的二次近似是：

$$\ln(1+x)\approx x-\frac{1}{x}x^{2}$$

$$\sin{x} \approx x$$

$$\cos{x} \approx 1-\frac{1}{2}x^{2}$$

$$e^{x} \approx 1+x+\frac{1}{2}x^{2}$$

$$(1+x)^{r} = 1+rx+\frac{r(r-1)}{2}x^{2}$$

![图片11.png](https://i.loli.net/2021/07/15/7ozTCFBi3bZhLJj.png)

上面表示了$\cos$函数在$x_{0}=0$的线性近似$y=1$和二次近似$y=1-\frac{1}{2}x^{2}$

可以知道，二阶近似的几何意义在于更加接近了原函数（有泰勒展开那味儿了，虽然我感觉这个几何意义像是废话，不过二次比一次应该更能看出函数的趋势）

-----------------------------------------

举个例子：在$x=0$求函数$e^{-3 x} / \sqrt{1+x}$的二阶近似公式

$$e^{-3 x}(1+x)^{-1 / 2} \approx\left[1-3 x+\frac{1}{2}(-3 x)^{2}\right]\left[1+\left(-\frac{1}{2}\right) x+\frac{1}{2}\left(-\frac{1}{2}\right)\left(-\frac{3}{2}\right) x^{2}\right]$$

$$\Rightarrow e^{-3 x}(1+x)^{-1 / 2} \approx 1-3 x-\frac{1}{2} x+\frac{3}{2} x^{2}+\frac{9}{2} x^{2}+\frac{3}{8} x^{2}=1-\frac{7}{2} x+\frac{51}{8} x^{2}$$

> 因为求的是二阶近似，和之前线性近似一样，在对$e^{x}$，$\sqrt{x}$进行二次近似时已经舍去了$O(\Delta x^{3})$项，所以只要是大于二阶的就可以直接不要了

### 曲线构图（凹凸性）

曲线构图：利用一阶导数$f'$和二阶导数$f''$的正负形，得到函数$f$的图像（即图像的凹凸性）

$$ \begin{aligned}  &f^{\prime}(x)>0 \Rightarrow f(x) \text{递增}\\\\\\\\  &f^{\prime}(x)<0 \Rightarrow f(x) \text{递减}\\\\\\\\  &f^{\prime\prime}(x)>0 \Rightarrow f^{\prime}(x) \text{递增} \Rightarrow f(x) \text{为凸函数}\\\\\\\\  &f^{\prime\prime}(x)<0 \Rightarrow f^{\prime}(x) \text{递减} \Rightarrow f(x) \text{为凹函数}\\\\\\\\      \end{aligned} $$

举个例子；$f(x) = 3x-x^{2}$

可得一阶导数：$f'(x) = 3-3x^{2} = 3(1-x)(1+x)$

所以：

$-1<x<1$时，$f'(x)>0$，所以$f(x)$递增

$-1>x \text{或} x>1$时，$f'(x)<0$，所以$f(x)$递减

> **驻点：** 当$f'(x_{0})=0$时，则称$x_{0}$为函数$f(x)$的驻点，$y_{0} = f(x_{0})$为函数的驻点值。本函数中，驻点为1,-1；驻点值为：$f(1)=2$，$f(-1)=-2$

所以通过一阶导数，我们可以大致勾勒出这个函数的大致趋势：

![图片12.png](https://i.loli.net/2021/07/16/lzuHQqGaih1XMSj.png)

其二阶导数：$f''(x) = -6x$

$x>0$时，$f''(x)<0$，函数为凹函数
$x<0$时，$f''(x)>0$，函数为凸函数

所以函数的图像就可以大致画出来了：

![图片15.png](https://i.loli.net/2021/07/16/JNGiwZeKdpBjnSF.png)

> **拐点：** $f''(0)=0$所在的点，在这里函数的凹凸性改变
