---
title: "从头再来之单变量微积分"
date: 2021-07-11T15:01:38+08:00
draft: false
categories:
    - work
    - mathematics
    - calculus
    - machine learning
tags:
    - math
    - calculus
    - 从头再来
libraries:
    - katex

enableTocContent: true
---

## 前沿

MIT 18.01，该学的总得学

## 1. 导数 (derivative)

### 几何解释

![图片1.png](https://i.loli.net/2021/07/11/p4kCTMmu6IYP7QN.png)

求图像 $y=f(x)$ 在某点 $P=(x_{0},y_{0})$ 处的切线：$y-y_{0}=m(x-x_{0})$。因此我们需要一下几个条件：

1. 这个切线经过点$p=(x_{0},y_{0})$，所以有： $y_{o}=f(x_{0})$

2. 这个切线的斜率：$m$，即 $f$ 的导数 $f'(x)$

所以这里就可以给出导数的定义：

**导数(derivative)**：它是$f$在$x_{0}$处的导数，也是$y=f(x)$在此点的斜率

-------------------------------------------

![图片2.png](https://i.loli.net/2021/07/11/VQ4MUb2Wo3DLaHt.png)

也可以这样理解，另取一个点$Q$与$P$构成一条割线，当$Q$逐渐逼近$P$时，割线就会逐渐逼近切线，即：

**切线其实是一种极限**，是$Q$趋近于$P$时，割线$PQ$的极限（可以把$P$当做不变，而$Q$变化）

- 水平方向上的位置差$\Delta x$，即$x$的变化量
- 斜率所对应增长的高即$\Delta f$

所以，割线的斜率表示为:$\frac{\Delta f}{\Delta x}$

而割线逼近切斜的过程可以用$\Delta x \rightarrow 0$，即$\Delta x$趋近于0的极限来表示

所以切线的斜率是：

$$m=\lim_{\Delta x \rightarrow 0}{\frac{\Delta f}{\Delta x}}$$

所以，**导数的含义还可以理解为**：

导数等于当$\Delta x$趋近于0时，$f$的变化量，即

$$f'(x_{0}) = \lim_{\Delta x_{0}\rightarrow 0}{\frac{f(x_{0}+\Delta x)-f(x_{0})}{\Delta x}}$$

-------------------------------------------

举几个例子：

- $f(x) = \frac{1}{x}$

$$\frac{\Delta f}{\Delta x}=\frac{\frac{1}{x_{0}+\Delta x}-\frac{1}{x_{0}}}{\Delta x}=\frac{1}{\Delta x}\left[\frac{x_{0}-\left(x_{0}+\Delta x\right)}{\left(x_{0}+\Delta x\right) x_{0}}\right]=\frac{1}{\Delta x}\left[\frac{-\Delta x}{\left(x_{0}+\Delta x\right) x_{0}}\right]=\frac{-1}{\left(x_{0}+\Delta x\right) x_{0}}$$

> 这个表达$\frac{\Delta f}{\Delta x}$有一个学名，叫做**差商(difference quotient)**

现在取$\Delta x\rightarrow 0$，得到最终的导数：

$$\lim_{\Delta x \rightarrow 0} \frac{-1}{\left(x_{0}+\Delta x\right) x_{0}}=-\frac{1}{x_{0}^{2}}$$

![图片3.png](https://i.loli.net/2021/07/11/hBfjuMaAvqX9YiS.png)

> 可以简单检验一下结果的正确：1.切线的斜率永远都是负的，即导数永远都是负的 2.当$\Delta x \rightarrow \infty$，$f^{\prime}\left(x_{0}\right)$的绝对值越来越小，对应图像上的切线越来越平缓

**另一个例子：**（导数的实际应用）

求由$y=1/x$切线和坐标轴围合而成的三角形区域面积，即上图中的阴影部分面积

通过$P=(x_{0},y_{0})$点的切线方程：

$$y-y_{0}=f^{\prime}\left(x_{0}\right)\left(x-x_{0}\right)=\frac{-1}{x_{0}^{2}}\left(x-x_{0}\right)$$

- 计算$x$轴截距，当$y=0$时，$x=2x_{0}$
- 计算$y$轴截距，因为$y=1/x$是对称的，所以$y=2y_{0}$

最后可得三角形面积：$\left(2 x_{0}\right)\left(2 y_{0}\right) / 2=\left(2 x_{0}\right)\left(2 / x_{0}\right) / 2=2$

**再举一个例子**

$f(x)=x^{n}$，$n=1,2,\cdots$，求$f'$


$$\frac{\Delta f}{\Delta x}=\frac{(x+\Delta x)^{n}-x^{n}}{\Delta x}$$

二项式定理：

$$(x+\Delta x)^{n}=(x+\Delta x)(x+\Delta x) \cdots(x+\Delta x)=x^{n}+n x^{n-1} \Delta x+O\left((\Delta x)^{2}\right)$$

> 其中，$O\left((\Delta x)^{2}\right)$表示这些项中$\Delta x$具有更高阶，在求$x^{n}$导数的这个问题中可以忽略不计

所以，可以得到：

$$ \begin{aligned} \frac{\Delta f}{\Delta x} &=\frac{1}{\Delta x}\left((x+\Delta x)^{n}-x^{n}\right) \\\\\\\\ &=\frac{1}{\Delta x}\left(x^{n}+n x^{n-1} \Delta x+O\left((\Delta x)^{2}\right)-x^{n}\right) \\\\\\\\ &=n x^{n-1}+O(\Delta x) \end{aligned} $$

当$\Delta x\rightarrow 0$时，可以得到：

$$\frac{d}{d x} x^{n}=n x^{n-1}$$

### 导数的表示法

- 牛顿：$f'$
- 莱布尼茨：$\frac{d f}{d x}=\frac{d y}{d x}=\frac{d}{d x} f=\frac{d}{d x} y$

$$f' = \frac{d f}{d x}=\frac{d y}{d x}=\frac{d}{d x} f=\frac{d}{d x} y$$

> 经常的情况，混在一块用也是可以的

### 物理解释

> 导数即“变化率”

![图片4.png](https://i.loli.net/2021/07/12/5zDsPdR4IkbXKvy.png)

当作图$y=f(x)$时，我们可以记录$x$和$y$的变化，就相当于记录了相对变换率：$\frac{\Delta y}{\Delta x}$

从变化率的角度，这是一种平均变化率（通常可以把$x$想象成时间）

$\Delta x \rightarrow 0$则有：$\frac{\Delta y}{\Delta x} \rightarrow \frac{d y}{d x}$，变成了瞬时变化率

**举几个例子：**

1. $q$表示电荷，$\frac{d q}{d t}$表示电流
2. $s$表示距离，$\frac{d s}{d t}$表示速度
3. $T$表示温度，$\frac{d T}{d t}$表示温度梯度


## 2. 极限和连续 (limits and continuity)

### 极限

举一些简单极限的例子：$\lim _{x \rightarrow 4} \frac{x+3}{x^{2}+1}=\frac{4+3}{4^{2}+1}=\frac{7}{17}$

但是导数的情况永远不会那么简单：$\lim_{x \rightarrow x_{0}} \frac{f(x)-f\left(x_{0}\right)}{x-x_{0}}$，结果永远是$0/0$，所以需要先对他进行一些消运算

- **右极限**：$\lim_{x \rightarrow x_{0}^{+}} f(x)$，表示取的是函数的右极限。即$x$从$x_{0}$的右侧接近$x_{0}$
    $x\rightarrow x_{0}$
    $x>x_{0}$

- **左极限**：$\lim_{x \rightarrow x_{0}^{-}} f(x)$，表示取的是函数的左极限。即$x$从$x_{0}$的左侧接近$x_{0}$
    $x\rightarrow x_{0}$
    $x<x_{0}$

</br>

举个例子：$f(x)=\left\\{\begin{array}{c}x+1, x \geq 0 \\\\ -x+2, x<0\end{array}\right.$

![图片5.png](https://i.loli.net/2021/07/12/NzAHBSneavrsOt3.png)
> 图源知乎@三少爷的键

右极限： $\lim_{x \rightarrow 0^{+}} f(x)=\lim _{x \rightarrow 0} x+1=1$

左极限： $\lim_{x \rightarrow 0^{-}} f(x)=\lim _{x \rightarrow 0}-x+2=2$

> 求极限的时候不需要知道$x=0$的函数值，比如这里根本就没定义过$f(0)$

### 连续

**定义**：$x\rightarrow x_{0}$时，$f(x)$的极限等于$f(x_{0})$，则称：$f$在$x_{0}$点的连续。即：

1. 要求$\lim_{x \rightarrow x_{0}} f(x)$这一极限必须存在，**左极限=右极限**
2. $f(x_{0})$必须有定义
3. 函数值和极限相等：$\lim_{x \rightarrow x_{0}} f(x)=f\left(x_{0}\right)$

------------------------

讨论几种不连续的情况：

1. 跳跃间断：左右极限均存在，但是不相等。即上面的这个例子就是跳跃间断

2. 可去间断：左右极限存在并相等，但不等于函数值。

    ![图片6.png](https://i.loli.net/2021/07/13/AwDmlRu9Qzcxfq2.png)
    > 图源知乎@三少爷的键

    例：$g(x)=\frac{\sin x}{x}$ 和 $h(x)=\frac{1-\cos x}{x}$ 他们在零点无定义，但是他们可以在零点去极限，所以他们在$x=0$可去间断

3. 无穷间断：左右极限是无穷
    
    例：$y=1/x$

    $\lim_{x\rightarrow x^{+}}\frac{1}{x} = \infty$

    $\lim_{x\rightarrow x^{-}}\frac{1}{x} = -\infty$

    ![图片7.png](https://i.loli.net/2021/07/13/kXu1n3jzaEYtb8V.png)

    他的导数也是无穷间断，但是是左右极限一致都是负无穷：$y' = \frac{-1}{x^{2}}$

4. 另类（丑陋）间断：例如 $y=\sin{\frac{1}{x}}$，当$x\rightarrow 0$时，将无限震荡，没有左右极限

    ![图片8.png](https://i.loli.net/2021/07/13/iNSLzjnX2GbstZF.png)

------------------------

**定理：可导必连续**，若函数$f(x)$在$x_{0}$点可导，则函数$f(x)$在$x_{0}$连续，即：

$$\lim_{x \rightarrow x_{0}} f(x)-f\left(x_{0}\right)=0$$

证明：

$$\lim_{x \rightarrow x_{0}} f(x)-f\left(x_{0}\right)=\lim_{x \rightarrow x_{0}} \frac{f(x)-f\left(x_{0}\right)}{x-x_{0}}\left(x-x_{0}\right)=f^{\prime}\left(x_{0}\right) \cdot 0=0$$

## 3. 求导公式及三角函数导数

求导公式分为两种：1) 针对特殊函数进行求导； 2) 另一种是通用的求导法则

### 特定的求导法则

1. $x$ 的 $n$ 次方：$f(x) = x^{n}$
   
    $f'(x) = nx^{n-1}$

</br>

2. $x$ 的倒数： $f(x) = \frac{1}{x}$

    $f'(x) = -\frac{1}{x^{2}}$


</br>

3. 正弦函数：$f(x) = \sin{x}$

    $f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \sin x=\cos x$

    > 简要推导一下：
    >
    > $$ \begin{aligned} \frac{\sin (x+\Delta x)-\sin x}{\Delta x} &=\frac{\sin x \cos \Delta x+\cos x \sin \Delta x-\sin x}{\Delta x} \\\\ &=\sin x\left(\frac{\cos \Delta x-1}{\Delta x}\right)+\cos x\left(\frac{\sin \Delta x}{\Delta x}\right) \end{aligned} $$
    > > 正弦两角和公式：$\sin{(a+b)} = \sin{a}\cos{b} + \cos{a}\sin{b}$
    > > 余弦两角和公式：$\cos{(a+b)} = \cos{a}\cos{b} - \sin{a}\sin{b}$
    > >     
    > > 在进行求解的时候，要尽量把$1/0$化成$0/0$的形式，这样才方便求极限，因此把$\sin x \cos \Delta x$和$\sin x$合并同类项
    > 
    > $\Delta x \rightarrow 0$时，$(\cos \Delta x-1) / \Delta x \rightarrow 0$
    > $\Delta x \rightarrow 0$时，$\sin \Delta x / \Delta x \rightarrow 1$
    > 
    > $$\therefore f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \sin x=\cos x$$

    > 这里还需要证明一下上面的两个极限：
    > 
    > $$ \begin{aligned} \lim _{\theta \rightarrow 0} \frac{1-\cos \theta}{\theta} &=\lim _{\theta \rightarrow 0}\left(\frac{1-\cos \theta}{\theta} \cdot \frac{1+\cos \theta}{1+\cos \theta}\right) \\\\ &=\lim _{\theta \rightarrow 0} \frac{1-\cos ^{2} \theta}{\theta(1+\cos \theta)} \\\\ &=\lim _{\theta \rightarrow 0} \frac{\sin ^{2} \theta}{\theta(1+\cos \theta)} \\\\ &=\lim _{\theta \rightarrow 0}\left(\frac{\sin \theta}{\theta} \cdot \frac{\sin \theta}{1+\cos \theta}\right) \\\\ &=\left(\lim _{\theta \rightarrow 0} \frac{\sin \theta}{\theta}\right) \cdot\left(\lim _{\theta \rightarrow 0} \frac{\sin \theta}{1+\cos \theta}\right) \\\\ &=1 \cdot \frac{0}{1+1}=0 \end{aligned} $$
    > 
    > $$\lim_{\theta \rightarrow 0} \frac{\sin \theta}{\theta}=1$$
    > 这个证明网上有详细的几何法证明：[正弦函数求导公式基本推导](https://www.cnblogs.com/haogev6/p/8557082.html)，视频中给出的感觉不太严谨

4. 余弦函数：$f(x) = \sin{x}$

    $f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \cos x=-\sin x$

    > 同上。进行简要推导：
    > 
    > $$ \begin{aligned} \frac{\cos (x+\Delta x)-\cos x}{\Delta x} &=\frac{\cos x \cos \Delta x-\sin x \sin \Delta x-\cos x}{\Delta x} \\\\ &=\cos x\left(\frac{\cos \Delta x-1}{\Delta x}\right)-\sin x\left(\frac{\sin \Delta x}{\Delta x}\right) \end{aligned} $$
    >
    > $$\therefore f'(x) = \frac{\mathrm{d}}{\mathrm{d} x} \cos x=-\sin x$$

### 通用求导法则

1. 导数的加法法则

    $$(u+v)' = u' + v'$$

    或者可以写成：

    $$\frac{\mathrm{d}}{\mathrm{d} x}(u(x)+v(x))=\frac{\mathrm{d}}{\mathrm{d} x} u(x)+\frac{\mathrm{d}}{\mathrm{d} x} v(x)$$

2. 导数的数乘法则

    $$(Cu)' = Cu'$$

    其中，$C$为常数。或写作：

    $$\frac{\mathrm{d}}{\mathrm{d} x} c u(x)=c \frac{\mathrm{d}}{\mathrm{d} x} u(x)$$

3. 导数的乘法法则

    $$(uv)' = u'v + uv'$$

    或者可以写成：

    $$\frac{\mathrm{d}u(x)v(x)}{\mathrm{d} x} =  u(x)\frac{\mathrm{d}v(x)}{\mathrm{d} x}+v(x)\frac{\mathrm{d}u(x)}{\mathrm{d} x}$$

    > 即求导每次只改变一个函数，除法同理

    > 简单证明一下：
    > $$ \begin{aligned} &\Delta(u v)=u(x+\Delta x) v(x+\Delta x)-u(x) v(x) \\\\ &=(u(x+\Delta x)-u(x)) v(x+\Delta x)+u(x)(v(x+\Delta x)-v(x)) \end{aligned} $$
    > 两边取极限，得到：
    > $$\frac{d}{d x}(u v)=\frac{d u}{d x} v+\frac{d v}{d x} u$$

    > 课程中将导数的除法法则单独列出来了，但是我还是习惯将除法化成乘法$X^{-1}$的形式

## 4. 链式法则及高阶导数

### 链式法则

链式法则：一条合乘规则，重点在于代换，即复合函数的微分是两个导数的乘积

$$\frac{\Delta y}{\Delta t}=\frac{\Delta y}{\Delta x} \frac{\Delta x}{\Delta t}$$

举个例子：

$$y=(\sin t)^{10}=\sin ^{10}(t)$$

这种类型的函数，即多个简单函数嵌套在一起，求导方法在于换元，令$x=\sin t$，则有$y=x^{10}$，所以最后得到：

$$\frac{d}{d t}(\sin t)^{10}=10 x^{9} \cos t=10(\sin t)^{9} \cos t$$

再一个例子：

$$\frac{d}{d t} \sin (10 t)$$

$x=10 t$为内函数，$y=\sin x$为外函数

$$\frac{d}{d t} \sin (10 t)=\cos x \cdot 10=10 \cos (10 t)$$

### 高阶导数

高阶导数：指不断的进行求导，要想得到三阶导数，就需要从一阶导数求二阶，从二阶求三阶

$$u=u(x), \quad u^{\prime}, \quad u^{\prime \prime}=\left(u^{\prime}\right)^{\prime}, \quad u^{\prime \prime \prime}=\left(u^{\prime \prime}\right)^{\prime}, \quad u^{(4)}=u^{\prime \prime \prime \prime}=\left(u^{\prime \prime \prime}\right)^{\prime}$$

举个例子：

$$u=\sin x, \quad u^{\prime}=\cos x, \quad u^{\prime \prime}=-\sin x, \quad u^{\prime \prime \prime}=-\cos x, \quad u^{(4)}=\sin x$$

------------------------------------------------

**莱布尼兹表示法**：$u^{\prime}=\frac{d u}{d x}=\frac{d}{d x} u=D u$

可以将$D=\frac{d}{d x}$视为一个运算符，将一个函数转换成另一个函数。比如；输入$\sin$得到他的导数是$\cos$，输入$x^{2}$得到他的导数是$2x$

在这种表示法下，高阶导数可以表示为；

$$u^{\prime \prime}=\frac{d}{d x} \frac{d u}{d x}=\frac{d}{d x} \frac{d}{d x} u=\left(\frac{d}{d x}\right)^{2} u=\frac{d^{2}}{d x^{2}} u=\frac{d^{2} u}{d x^{2}}=D^{2} u$$

表示二阶的导数，注意，这里$\frac{d^{2} u}{d x^{2}}$的分母下的表示法$\mathrm{d} x^{2}$的实际含义是$(\mathrm{d}x)^{2}$

$$u^{\prime \prime \prime}=\frac{d^{3} u}{d x^{3}}=D^{3} u$$

表示三阶代数

举个例子：求$D^{n} x^{n}$

$$ \begin{aligned} D x^{n}&=n x^{n-1} \\\\ D^{2} x^{n}&=n(n-1) x^{n-2} \\\\ D^{3} x^{n}&=n(n-1)(n-2) x^{n-3}\\\\ &\vdots \\\\ D^{n} x^{n}&=n(n-1)(n-2) \ldots 2 \cdot 1=n ! \end{aligned} $$

## 5. 隐函数和逆函数求导

### 隐函数求导

隐函数：两个变量的关系不是显式($y=2x$)，而是隐式的，如：$x^{2}+y^{2}=1$

举个例子，将上面幂的导数扩展为有理数的情况，即：

$$\frac{d}{d x} x^{a}=a x^{a-1}, \quad a=\frac{m}{n}, \quad \text{m,n均为整数，求}\frac{\mathrm{d}y}{\mathrm{d}x}$$

转换一下可得：

$$y^{n}=x^{m}$$

对等式两侧求微分：

$$\frac{d}{d x} y^{n}=\frac{d}{d x} x^{m}$$

> 注意，这里的两边同样都是对$x$求微分

$$ \begin{aligned} &\Rightarrow \frac{d}{d y} y^{n} \frac{d y}{d x}=m x^{m-1} \\\\\\\\ &\Rightarrow n y^{n-1} \frac{d y}{d x}=m x^{m-1} \\\\\\\\ &\Rightarrow \frac{d y}{d x}=\frac{m x^{m-1}}{n y^{n-1}}=\frac{m}{n} \frac{x^{m-1}}{\left(x^{m / n}\right)^{n-1}}=\frac{m}{n} x^{\frac{m}{n}-1}=a x^{a-1} \end{aligned} $$

</br>

在举一个例子：



